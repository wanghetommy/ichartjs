(function(b){b.Rectangle=b.extend(b.Component,{configure:function(){b.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("parseText");this.label=null},doDraw:function(a){a.drawRectangle();a.label&&a.label.draw()},doConfig:function(){b.Rectangle.superclass.doConfig.call(this);var a=this._(),c=a.variable.event,d=a.get("valueAlign");b.Assert.gt(a.get(a.W),0,a.W);b.taylor.light(a,c);a.width=a.get(a.W);a.height=a.get(a.H);var c=a.push("centerx",a.x+a.width/2),e=a.push("centery",a.y+a.height/2),f=a.C,g="middle",h=a.get("value_space");a.push("value",a.fireString(a,"parseText",[a,a.get("value")],a.get("value")));d==a.L?(f=a.R,c=a.x-h):d==a.R?(f=a.L,c=a.x+a.width+h):d==a.B?(e=a.y+a.height+h,g=a.O):(e=a.y-h,g=a.B);a.get("label")&&(a.push("label.originx",c),a.push("label.originy",e),a.push("label.text",a.get("value")),b.applyIf(a.get("label"),{textAlign:f,textBaseline:g,color:a.get("color")}),a.label=new b.Text(a.get("label"),a));a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new b.Tip(a.get("tip"),a))}});b.Rectangle2D=b.extend(b.Rectangle,{configure:function(){b.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawRectangle:function(){var a=this._();a.T.box(a.get(a.X),a.get(a.Y),a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"),a.get("shadow"))},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.width&&a.y<b.y+b.height&&a.y>b.y}},tipInvoke:function(){var a=this._();return function(b,d){return{left:a.tipX(b,d),top:a.tipY(b,d)}}},doConfig:function(){b.Rectangle2D.superclass.doConfig.call(this);var a=this._(),c=a.get("tipAlign");c==a.L||c==a.R?a.tipY=function(b,c){return a.get("centery")-c/2}:a.tipX=function(b){return a.get("centerx")-b/2};c==a.L?a.tipX=function(b){return a.x-a.get("value_space")-b}:c==a.R?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY=c==a.B?function(){return a.y+a.height+3}:function(b,c){return a.y-c-3};a.applyGradient()}});b.Rectangle3D=b.extend(b.Rectangle,{configure:function(){b.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=b._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var a=this._();a.T.cube(a.get(a.X),a.get(a.Y),a.get("xAngle_"),a.get("yAngle_"),a.get(a.W),a.get(a.H),a.get("zHeight"),a.get("f_color"),a.get("border.enable"),a.get("border.width"),a.get("light_color"),a.get("shadow"))},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.get(b.W)&&a.y<b.y+b.get(b.H)&&a.y>b.y}},tipInvoke:function(){var a=this._();return function(b,d){return{left:a.topCenterX-b/2,top:a.topCenterY-d}}},doConfig:function(){b.Rectangle3D.superclass.doConfig.call(this);var a=this._();a.pushIf("zHeight",a.get(a.W));a.topCenterX=a.x+(a.get(a.W)+a.get(a.W)*a.get("xAngle_"))/2;a.topCenterY=a.y-a.get(a.W)*a.get("yAngle_")/2;a.get("valueAlign")==a.O&&a.label&&(a.label.push("textx",a.topCenterX),a.label.push("texty",a.topCenterY))}});b.Column=b.extend(b.Chart,{configure:function(){b.Column.superclass.configure.call(this);this.type="column";this.set({coordinate:{},colwidth:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}});this.registerEvent()},doAnimation:function(a,b,d){var e;d.coo.draw();d.labels.each(function(a){a.draw()});d.rectangles.each(function(f){e=Math.ceil(d.animationArithmetic(a,0,f.height,b));f.push(d.Y,f.y+(f.height-e));f.push(d.H,e);f.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(a,c,d,e,f){a.labels.push(new b.Text(b.apply(a.get("label"),{id:c,text:d,originx:e,originy:f}),a))},doParse:function(a,b,d,e){a.doActing(a,b,e,d)},doConfig:function(){b.Column.superclass.doConfig.call(this);var a=this._();a.sub=a.is3D()?"Rectangle3D":"Rectangle2D";a.rectangles=[];a.labels=[];a.components.push(a.labels);a.components.push(a.rectangles);b.Coordinate.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;var c=a.data.length,d=a.get("coordinate.valid_width"),e,f,g;"simple"==a.dataType?(e=Math.floor(2*d/(3*c+1)),f=a.pushIf("colwidth",e),g=c+1):(g=a.get("labels").length,c=g*c+(a.is3D()?(c-1)*g*a.get("group_fator"):0),e=Math.floor(d/(g+1+c)),f=a.pushIf("colwidth",e),g+=1);f*c>d&&(f=a.push("colwidth",e));a.push("hispace",(d-f*c)/g);a.is3D()&&(a.push("zHeight",a.get("colwidth")*a.get("zScale")),a.push("sub_option.zHeight",a.get("zHeight")),a.push("sub_option.xAngle_",a.get("xAngle_")),a.push("sub_option.yAngle_",a.get("yAngle_")));a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);a.push("sub_option.width",a.get("colwidth"))}});b.Column2D=b.extend(b.Column,{configure:function(){b.Column2D.superclass.configure.call(this);this.type="column2d"},doConfig:function(){b.Column2D.superclass.doConfig.call(this);var a=this._(),c=a.get("colwidth"),d=a.get("hispace"),e=a.coo.getScale(a.get("scaleAlign")),f=a.coo.get(a.H),g=c/2,h=c+d,i,j=a.coo.get(a.Y)+f,l=j-e.basic*f-(a.is3D()?a.get("zHeight")*(a.get("bottom_scale")-1)/2*a.get("yAngle_"):0),m=d+a.coo.get("x_start"),j=j+a.get("text_space")+a.coo.get("axis.width")[2];a.data.each(function(c,d){i=(c.value-e.start)*f/e.distance;a.doParse(a,c,d,{id:d,originx:m+d*h,originy:l-(0<i?i:0),height:Math.abs(i)});a.rectangles.push(new b[a.sub](a.get("sub_option"),a));a.doLabel(a,d,c.name,m+h*d+g,j)},a)}});b.Column3D=b.extend(b.Column2D,{configure:function(){b.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=b._3D;this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){b.Column3D.superclass.doConfig.call(this)}});b.ColumnMulti2D=b.extend(b.Column,{configure:function(){b.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.set({labels:[]})},doConfig:function(){b.ColumnMulti2D.superclass.doConfig.call(this);var a=this._(),c=a.get("hispace"),d=a.get("colwidth"),e=a.coo.get(a.H),f=a.coo.getScale(a.get("scaleAlign")),g=d*(a.get("group_fator")||0),h=a.data.length*d+c+(a.is3D()?(a.data.length-1)*g:0),i,j=a.coo.get("x_start")+c,l=a.coo.get(a.Y)-f.basic*e+e,m=a.coo.get(a.Y)+e+a.get("text_space")+a.coo.get("axis.width")[2];a.columns.each(function(k,n){k.item.each(function(c,k){i=(c.value-f.start)*e/f.distance;a.doParse(a,c,k,{id:n+"-"+k,originx:j+k*(d+g)+n*h,originy:l-(0<i?i:0),height:Math.abs(i)});a.rectangles.push(new b[a.sub](a.get("sub_option"),this))},a);a.doLabel(a,n,k.name,j-0.5*c+(n+0.5)*h,m)},a)}});b.ColumnMulti3D=b.extend(b.ColumnMulti2D,{configure:function(){b.ColumnMulti3D.superclass.configure.call(this);this.type="columnmulti3d";this.dataType="complex";this.dimension=b._3D;this.set({xAngle:60,yAngle:20,zScale:1,group_fator:0.3,bottom_scale:1.4})},doConfig:function(){b.ColumnMulti3D.superclass.doConfig.call(this)}});b.Bar=b.extend(b.Chart,{configure:function(){b.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},barheight:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(a,c,d,e){this.labels.push(new b.Text(b.apply(this.get("label"),{id:a,text:c,textAlign:"right",textBaseline:"middle",originx:d,originy:e}),this))},doParse:function(a,b,d,e){a.doActing(a,b,e,d)},doAnimation:function(a,b,d){d.coo.draw();d.labels.each(function(a){a.draw()});d.rectangles.each(function(e){e.push(d.W,Math.ceil(d.animationArithmetic(a,0,e.width,b)));e.drawRectangle()})},doConfig:function(){b.Bar.superclass.doConfig.call(this);var a=this._();b.Coordinate.coordinate.call(a);a.rectangles=[];a.labels=[];a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;a.components.push(a.labels);a.components.push(a.rectangles);var c=a.data.length,d=a.get("coordinate.valid_height"),e,f,g;"simple"==a.dataType?(e=Math.floor(2*d/(3*c+1)),f=a.pushIf("barheight",e),g=c+1):(g=a.get("labels").length,c=g*c+(a.is3D()?(c-1)*g*a.get("group_fator"):0),e=Math.floor(d/(g+1+c)),f=a.pushIf("barheight",e),g+=1);f*c>d&&(f=a.push("barheight",e));a.push("barspace",(d-f*c)/g);a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);a.push("sub_option.height",f);a.push("sub_option.valueAlign",a.R);a.push("sub_option.tipAlign",a.R)}});b.Bar2D=b.extend(b.Bar,{configure:function(){b.Bar2D.superclass.configure.call(this);this.type="bar2d"},doConfig:function(){b.Bar2D.superclass.doConfig.call(this);var a=this._(),c=a.get("barheight"),d=a.get("barspace"),e=a.coo.getScale(a.get("scaleAlign")),f=a.coo.get(a.W),g=c/2,h=c+d,i,j=a.coo.get(a.X)+e.basic*f,l=a.coo.get(a.X)-a.get("text_space")-a.coo.get("axis.width")[3],m=a.coo.get("y_start")+d;a.data.each(function(d,c){i=(d.value-e.start)*f/e.distance;a.doParse(a,d,c,{id:c,originy:m+c*h,width:Math.abs(i),originx:j+(0<i?0:-Math.abs(i))});a.rectangles.push(new b.Rectangle2D(a.get("sub_option"),a));a.doLabel(c,d.name,l,m+c*h+g)},a)}});b.BarMulti2D=b.extend(b.Bar,{configure:function(){b.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doConfig:function(){b.BarMulti2D.superclass.doConfig.call(this);var a=this._(),c=a.data.length,d=a.coo.get(a.W),e=a.get("barheight"),f=a.coo.getScale(a.get("scaleAlign")),g=c*e+a.get("barspace");a.get("barheight");var h,i=a.coo.get(a.X)+f.basic*d,j=a.coo.get(a.X)-a.get("text_space")-a.coo.get("axis.width")[3],l=a.coo.get("y_start")+a.get("barspace");a.columns.each(function(c,k){c.item.each(function(c,j){h=(c.value-f.start)*d/f.distance;a.doParse(a,c,j,{id:k+"-"+j,originy:l+j*e+k*g,width:Math.abs(h),originx:i+(0<h?0:-Math.abs(h))});a.rectangles.push(new b.Rectangle2D(a.get("sub_option"),a))},a);a.doLabel(k,c.name,j,l-0.5*a.get("barspace")+(k+0.5)*g)},a)}})})(iChart);